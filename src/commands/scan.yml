description: >
  This command is used to run a new scan.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  target:
    type: string
    default: "https://brokencrystals.com"
    description: "What is the target to scan?"
  scan_name:
    type: string
    default: "CircleCI Scan"
    description: "What is the name of the scan?"
  project:
    type: string
    default: ""
    description: "What is the project ID to use for the scan?"
  token:
    type: env_var_name
    description: "What is the name of the environment variable containing the token?"
    default: BRIGHTSEC_TOKEN

steps:
  - run:
      name: Start a scan üèÅ
      command: |
          bright-cli scan:run --token "${<<parameters.token>>}" \\
                              --crawler "${<<parameters.target>>}" \\
                              --project "${<<parameters.project>>}" \\
                              --name "${<<parameters.scan_name>>}"
