description: >
  This command is used to run a new scan.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  target:
    type: string
    default: "https://brokencrystals.com"
    description: "What is the target to scan?"
  token:
    type: string
    description: "Which API token to use for the scan?"
  scan_name:
    type: string
    default: "CircleCI Scan"
    description: "What is the name of the scan?"
  project:
    type: string
    default: ""
    description: "What is the project ID to use for the scan?"

steps:
  - run:
      enviroment:
        BRIGHTSEC_TOKEN: << parameters.token >>
        BRIGHTSEC_PROJECT: << parameters.project >>
        BRIGHTSEC_NAME: << parameters.scan_name >>
        BRIGHTSEC_TARGET: << parameters.target >>
      name: Start a scan üèÅ
      command: <<include(scripts/scan.sh)>>
